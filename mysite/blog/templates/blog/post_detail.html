<!DOCTYPE html>
{% extends 'blog/base.html' %}

{% block content %}
<h1 class="posttitle loader">{{ post.title }}</h1>
  {% if post.published_date %}
    <div class="date postdate">
      {{ post.published_date }}

    </div>
  {% else %}
<a class='btn btn-warning' href="{% url 'post_publish' pk=post.pk %}">Publish</a>

  {% endif %}

  <p class='postcontent'>{{ post.text|safe|linebreaksbr }}</p>

  {% if user.is_authenticated %}
    <a href="{% url 'post_edit' pk=post.pk %}">
      <svg width="1.5em" color= height="1.5em" viewBox="0 0 16 16" class="bi bi-pencil-square" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
  <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
</svg>

    </a>
    <a href="{% url 'post_remove' pk=post.pk %}">
      <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-x-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.146-3.146a.5.5 0 0 0-.708-.708L8 7.293 4.854 4.146a.5.5 0 1 0-.708.708L7.293 8l-3.147 3.146a.5.5 0 0 0 .708.708L8 8.707l3.146 3.147a.5.5 0 0 0 .708-.708L8.707 8l3.147-3.146z"/>
</svg>
    </a>
  {% endif %}

  <hr>
  <a class="btn btn-primary btn-comment" href="{% url 'add_comments_to_post' pk=post.pk %}">Add Comments</a>

<div class="container">
  <!-- <p>Hello</p> -->
  {% for comment in post.comments.all %}
    <br>
    <!-- <p>in for</p> -->
      {% if user.is_authenticated or comment.approved_comment %}
        {{ comment.created_date }}
        {% if not comment.approved_comment %}
        <!-- <p>in if</p> -->
        <a href="{% url 'comment_remove' pk=comment.pk %}">
          <svg color='red' width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-x-square" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" d="M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
  <path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/>
  <path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/>
</svg>
        </a>

        <svg color='red' width="1.7em" height="1.7em" viewBox="0 0 16 16" class="bi bi-file-earmark-check-fill" fill="#4DBD33" xmlns="http://www.w3.org/2000/svg">
        <a href="{% url 'comment_approve' pk=comment.pk %}">
  <path fill-rule="evenodd" d="M2 3a2 2 0 0 1 2-2h5.293a1 1 0 0 1 .707.293L13.707 5a1 1 0 0 1 .293.707V13a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3zm7 2V2l4 4h-3a1 1 0 0 1-1-1zm1.854 2.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
</svg>
        </a>
        {% endif %}

        <p>{{ comment.text|safe|linebreaks }}</p>
        <p>Posted by: {{ comment.author }}</p>
      {% endif %}

      {% empty %}

      <p>No comments</p>
  {% endfor %}

</div>
{% endblock %}
